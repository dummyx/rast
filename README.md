SVT-AV1 Rust Bindings Workspace
===============================

This workspace provides a modern Rust binding for SVT-AV1 (validated against v3.1.2):

- `svt-av1-sys`: Raw FFI bindings generated by `bindgen` at build time. Full API coverage for the encoder API in v3.1.2 (decoder optional, not present in v3.1.2 headers).
- `svt-av1`: Thin, safe(ish) wrappers with RAII around core init/teardown and I/O calls for the encoder.

Getting started
- Ensure SVT-AV1 headers and libraries are installed on your system.
  - Typical headers: `EbSvtAv1Enc.h`, `EbSvtAv1Dec.h` in `/usr/include/svt-av1`.
  - Libraries: `libSvtAv1Enc.*` and `libSvtAv1Dec.*` in your system library path.
- Build will try `pkg-config` with names `svt-av1`, `SvtAv1Enc` (and `SvtAv1Dec` if decoder is enabled).

Environment variables
- `SVT_AV1_INCLUDE_DIR`: directory containing headers.
- `SVT_AV1_LIB_DIR`: directory containing libraries.
- `SVT_AV1_PKG_CONFIG_NAME`: override pkg-config package name.
- `SVT_AV1_NO_PKG_CONFIG=1`: disable pkg-config probing.

Features
- `encoder` (default) and `decoder` features in both crates; SVT-AV1 v3.1.2 exposes encoder headers only.
- `svt-av1-sys/buildtime-bindgen` enabled by default to run bindgen at build time.

Examples
- Minimal encoder example (header-only bindgen during CI or local):
  - `SVT_AV1_NO_PKG_CONFIG=1 SVT_AV1_INCLUDE_DIR=vendor/SVT-AV1/Source/API cargo check -p svt-av1 --example encode`

Example (encoder)
```
use svt_av1::encoder::{Encoder, Configuration};

fn main() -> Result<(), Box<dyn std::error::Error>> {
    let (mut enc, mut cfg) = Encoder::init_default()?;
    cfg.source_width = 1920;
    cfg.source_height = 1080;
    cfg.frame_rate_numerator = 30;
    cfg.frame_rate_denominator = 1;
    enc.set_parameter(&cfg)?;
    enc.init()?;
    // send pictures via BufferHeader and drain packets
    Ok(())
}
```

Notes
- These crates mirror the C API closely to ensure stability and completeness.
- The `svt-av1` crate intentionally keeps abstractions minimal.
